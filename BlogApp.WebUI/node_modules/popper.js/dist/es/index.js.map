{"version":3,"file":"index.js","sources":["../../src/dom-utils/getWindow.js","../../src/dom-utils/getComputedStyle.js","../../src/dom-utils/getElementClientRect.js","../../src/dom-utils/getParentNode.js","../../src/dom-utils/getScrollParent.js","../../src/dom-utils/listScrollParents.js","../../src/dom-utils/getWindowScroll.js","../../src/dom-utils/getHTMLElementScroll.js","../../src/dom-utils/getNodeScroll.js","../../src/dom-utils/getOffsetParent.js","../../src/dom-utils/getCommonTotalScroll.js","../../src/utils/unwrapJqueryElement.js","../../src/utils/orderModifiers.js","../../src/utils/expandEventListeners.js","../../src/utils/getBasePlacement.js","../../src/enums.js","../../src/utils/computeOffsets.js","../../src/utils/format.js","../../src/utils/debounce.js","../../src/utils/validateModifiers.js","../../src/modifiers/computeStyles.js","../../src/modifiers/applyStyles.js","../../src/modifiers/index.js","../../src/index.js"],"sourcesContent":["// @flow\nexport default function getWindow(node: Node) {\n  const ownerDocument = node.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getComputedStyle(element: HTMLElement) {\n  return getWindow(element).getComputedStyle(element);\n}\n","// @flow\nimport getComputedStyle from './getComputedStyle';\n\n// Returns the width, height and offsets of the provided element\nexport default (element: HTMLElement) => {\n  // get the basic client rect, it doesn't include margins\n  const width = element.offsetWidth;\n  const height = element.offsetHeight;\n  const top = element.offsetTop;\n  const left = element.offsetLeft;\n\n  // get the element margins, we need them to properly align the popper\n  const styles = getComputedStyle(element);\n\n  const marginTop = parseFloat(styles.marginTop) || 0;\n  const marginRight = parseFloat(styles.marginRight) || 0;\n  const marginBottom = parseFloat(styles.marginBottom) || 0;\n  const marginLeft = parseFloat(styles.marginLeft) || 0;\n\n  return {\n    width: width + marginLeft + marginRight,\n    height: height + marginTop + marginBottom,\n    y: top - marginTop,\n    x: left - marginLeft,\n  };\n};\n","// @flow\nexport default (element: Node | ShadowRoot): Node => {\n  if (element.nodeName === 'HTML') {\n    // DocumentElement detectedF\n    return element;\n  }\n  return (\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    document.ownerDocument || // Fallback to ownerDocument if available\n    document.documentElement // Or to documentElement if everything else fails\n  );\n};\n","// @flow\nimport getParentNode from './getParentNode';\nimport getComputedStyle from './getComputedStyle';\n\nexport default function getScrollParent(node: Node): Node {\n  if (!node) {\n    return document.body;\n  }\n\n  switch (node.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return node.ownerDocument.body;\n    case '#document':\n      // Flow doesn't understand nodeName type refinement unfortunately\n      return ((node: any): Document).body;\n  }\n\n  if (node instanceof HTMLElement) {\n    // Firefox want us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(node);\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}\n","// @flow\nimport getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\n\nexport default function listScrollParents(\n  element: Node,\n  list: Array<Node> = []\n): Array<Node> {\n  const scrollParent = getScrollParent(element);\n  const isBody = scrollParent.nodeName === 'BODY';\n  const target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  const updatedList = list.concat(target);\n  return isBody\n    ? updatedList\n    : updatedList.concat(listScrollParents(getParentNode(target)));\n}\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getWindowScroll(node: Node) {\n  const win = getWindow(node);\n  const scrollLeft = win.pageXOffset;\n  const scrollTop = win.pageYOffset;\n  return { scrollLeft, scrollTop };\n}\n","// @flow\n\nexport default function getHTMLElementScroll(element: HTMLElement) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop,\n  };\n}\n","// @flow\nimport getWindowScroll from './getWindowScroll';\nimport getWindow from './getWindow';\nimport getHTMLElementScroll from './getHTMLElementScroll';\n\nexport default function getElementScroll(node: Node) {\n  if (node === getWindow(node) || !(node instanceof HTMLElement)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getOffsetParent(element: Element) {\n  const offsetParent =\n    element instanceof HTMLElement ? element.offsetParent : null;\n  const window = getWindow(element);\n\n  if (\n    offsetParent &&\n    offsetParent.nodeName &&\n    offsetParent.nodeName.toUpperCase() === 'BODY'\n  ) {\n    return window;\n  }\n\n  return offsetParent || window;\n}\n","// @flow\nimport getNodeScroll from './getNodeScroll';\nimport getOffsetParent from './getOffsetParent';\n\nconst sumScroll = scrollParents =>\n  scrollParents.reduce(\n    (scroll, scrollParent) => {\n      const nodeScroll = getNodeScroll(scrollParent);\n      scroll.scrollTop += nodeScroll.scrollTop;\n      scroll.scrollLeft += nodeScroll.scrollLeft;\n      return scroll;\n    },\n    { scrollTop: 0, scrollLeft: 0 }\n  );\n\nexport default function getCommonTotalScroll(\n  reference: HTMLElement,\n  referenceScrollParents: Array<Node>,\n  popperScrollParents: Array<Node>\n) {\n  // if the scrollParent is shared between the two elements, we don't pick\n  // it because it wouldn't add anything to the equation (they nulllify themselves)\n  const nonCommonReference = referenceScrollParents.filter(\n    node => !popperScrollParents.includes(node)\n  );\n\n  // we then want to pick any scroll offset except for the one of the offsetParent\n  // not sure why but that's how I got it working ðŸ˜…\n  // TODO: improve this comment with proper explanation\n  const offsetParent = getOffsetParent(reference);\n  const index = referenceScrollParents.findIndex(node => node === offsetParent);\n\n  const scrollParents = referenceScrollParents.slice(\n    0,\n    index === -1 ? undefined : index\n  );\n\n  return sumScroll(scrollParents);\n}\n","// @flow\nexport default (element: any): HTMLElement =>\n  element && element.jquery ? element[0] : element;\n","// @flow\nimport type { Modifier } from '../types';\n\n// source: https://stackoverflow.com/questions/49875255\nconst order = modifiers => {\n  // indexed by name\n  const mapped = modifiers.reduce((mem, i) => {\n    mem[i.name] = i;\n    return mem;\n  }, {});\n\n  // inherit all dependencies for a given name\n  const inherited = i => {\n    return mapped[i].requires.reduce((mem, i) => {\n      return [...mem, i, ...inherited(i)];\n    }, []);\n  };\n\n  // order ...\n  const ordered = modifiers.sort((a, b) => {\n    return !!~inherited(b.name).indexOf(a.name) ? -1 : 1;\n  });\n  return ordered;\n};\n\nexport default (modifiers: Array<Modifier>): Array<Modifier> => [\n  ...order(modifiers.filter(({ phase }) => phase === 'read')),\n  ...order(modifiers.filter(({ phase }) => phase === 'main')),\n  ...order(modifiers.filter(({ phase }) => phase === 'write')),\n];\n","// @flow\nimport type { EventListeners } from '../types';\n\n// Expands the eventListeners value to an object containing the\n// `scroll` and `resize` booleans\n//\n// true => true, true\n// false => false, false\n// true, false => true, false\n// false, false => false, false\nexport default (\n  eventListeners: boolean | { scroll?: boolean, resize?: boolean }\n): EventListeners => {\n  const fallbackValue =\n    typeof eventListeners === 'boolean' ? eventListeners : false;\n\n  return {\n    scroll:\n      typeof eventListeners.scroll === 'boolean'\n        ? eventListeners.scroll\n        : fallbackValue,\n    resize:\n      typeof eventListeners.resize === 'boolean'\n        ? eventListeners.resize\n        : fallbackValue,\n  };\n};\n","// @flow\nimport { type BasePlacement, type Placement, typeof auto } from '../enums';\n\nexport default (placement: Placement | auto): BasePlacement =>\n  (placement.split('-')[0]: any);\n","// @flow\nexport const top: 'top' = 'top';\nexport const bottom: 'bottom' = 'bottom';\nexport const right: 'right' = 'right';\nexport const left: 'left' = 'left';\nexport const auto: 'auto' = 'auto';\nexport type BasePlacement =\n  | typeof top\n  | typeof bottom\n  | typeof right\n  | typeof left\n  | typeof auto;\nexport const basePlacements: Array<BasePlacement> = [top, bottom, right, left];\n\nexport const start: 'start' = 'start';\nexport const end: 'end' = 'end';\nexport type VariationPlacement = typeof start | typeof end;\n\nexport type Placement =\n  | 'auto'\n  | 'auto-start'\n  | 'auto-end'\n  | 'top'\n  | 'top-start'\n  | 'top-end'\n  | 'bottom'\n  | 'bottom-start'\n  | 'bottom-end'\n  | 'right'\n  | 'right-start'\n  | 'right-end'\n  | 'left'\n  | 'left-start'\n  | 'left-end';\n\nexport const placements: Array<Placement> = basePlacements.reduce(\n  (acc: Array<Placement>, placement: BasePlacement): Array<Placement> =>\n    acc.concat([\n      placement,\n      (`${placement}-${start}`: any),\n      (`${placement}-${end}`: any),\n    ]),\n  []\n);\n\n// modifiers that need to read the DOM\nexport const read: 'read' = 'read';\n// pure-logic modifiers\nexport const main: 'main' = 'main';\n// modifier with the purpose to write to the DOM (or write into a framework state)\nexport const write: 'write' = 'write';\n\nexport type ModifierPhases = typeof read | typeof main | typeof write;\n","// @flow\nimport getBasePlacement from './getBasePlacement';\nimport getAltAxis from './getAltAxis';\nimport getAltLen from './getAltLen';\nimport type { Rect, PositioningStrategy, Offsets } from '../types';\nimport { top, right, bottom, left, type Placement } from '../enums';\n\nexport default ({\n  reference,\n  popper,\n  strategy,\n  placement,\n  scroll,\n}: {\n  reference: Rect,\n  popper: Rect,\n  strategy: PositioningStrategy,\n  placement: Placement,\n  scroll: { scrollTop: number, scrollLeft: number },\n}): Offsets => {\n  const basePlacement = getBasePlacement(placement);\n\n  const { scrollTop, scrollLeft } = scroll;\n\n  switch (basePlacement) {\n    case top:\n      return {\n        x: reference.x + reference.width / 2 - popper.width / 2 - scrollLeft,\n        y: reference.y - popper.height - scrollTop,\n      };\n    case bottom:\n      return {\n        x: reference.x + reference.width / 2 - popper.width / 2 - scrollLeft,\n        y: reference.y + reference.height - scrollTop,\n      };\n    case right:\n      return {\n        x: reference.x + reference.width - scrollLeft,\n        y: reference.y + reference.height / 2 - popper.height / 2 - scrollTop,\n      };\n    case left:\n    default:\n      return {\n        x: reference.x - popper.width - scrollLeft,\n        y: reference.y + reference.height / 2 - popper.height / 2 - scrollTop,\n      };\n  }\n};\n","// @flow\nexport default (str: string, ...args: Array<string>) =>\n  [...args].reduce((p, c) => p.replace(/%s/, c), str);\n","// @flow\nexport default function microtaskDebounce(fn: Function) {\n  let called = false;\n  return () =>\n    new Promise<void>(resolve => {\n      if (called) {\n        return resolve();\n      }\n      called = true;\n      Promise.resolve().then(() => {\n        called = false;\n        resolve(fn());\n      });\n    });\n}\n","// @flow\nimport format from './format';\nimport { read, main, write } from '../enums';\n\nconst ERROR_MESSAGE =\n  'PopperJS: modifier \"%s\" provided an invalid %s property, expected %s but got %s';\nconst VALID_PROPERTIES = [\n  'name',\n  'enabled',\n  'phase',\n  'fn',\n  'onLoad',\n  'requires',\n  'options',\n];\n\nexport default (modifiers: Array<any>): void => {\n  modifiers.forEach(modifier => {\n    Object.keys(modifier).forEach(key => {\n      switch (key) {\n        case 'name':\n          if (typeof modifier.name !== 'string') {\n            console.error(\n              format(\n                ERROR_MESSAGE,\n                String(modifier.name),\n                '\"name\"',\n                '\"string\"',\n                `\"${String(modifier.name)}\"`\n              )\n            );\n          }\n          break;\n        case 'enabled':\n          if (typeof modifier.enabled !== 'boolean') {\n            console.error(\n              format(\n                ERROR_MESSAGE,\n                modifier.name,\n                '\"enabled\"',\n                '\"boolean\"',\n                `\"${String(modifier.enabled)}\"`\n              )\n            );\n          }\n        case 'phase':\n          if (![read, main, write].includes(modifier.phase)) {\n            console.error(\n              format(\n                ERROR_MESSAGE,\n                modifier.name,\n                '\"phase\"',\n                'either \"read\", \"main\" or \"write\"',\n                `\"${String(modifier.phase)}\"`\n              )\n            );\n          }\n          break;\n        case 'fn':\n          if (typeof modifier.fn !== 'function') {\n            console.error(\n              format(\n                ERROR_MESSAGE,\n                modifier.name,\n                '\"fn\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'onLoad':\n          if (typeof modifier.onLoad !== 'function') {\n            console.error(\n              format(\n                ERROR_MESSAGE,\n                modifier.name,\n                '\"onLoad\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'requires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(\n              format(\n                ERROR_MESSAGE,\n                modifier.name,\n                '\"requires\"',\n                '\"array\"',\n                `\"${String(modifier.requires)}\"`\n              )\n            );\n          }\n          break;\n        case 'object':\n          break;\n        default:\n          console.error(\n            `PopperJS: an invalid property has been provided to the \"${\n              modifier.name\n            }\" modifier, valid properties are ${VALID_PROPERTIES.map(\n              s => `\"${s}\"`\n            ).join(', ')}; but \"${key}\" was provided.`\n          );\n      }\n    });\n  });\n};\n","// @flow\nimport type { State, PositioningStrategy, Offsets } from '../types';\n\n// This modifier takes the Popper.js state and prepares some StyleSheet properties\n// that can be applied to the popper element to make it render in the expected position.\n\ntype Options = {\n  gpuAcceleration?: boolean,\n};\n\nexport const mapStrategyToPosition = (\n  strategy: PositioningStrategy\n): string => {\n  switch (strategy) {\n    case 'fixed':\n      return 'fixed';\n    case 'absolute':\n    default:\n      return 'absolute';\n  }\n};\n\nexport const computePopperStyles = ({\n  offsets,\n  strategy,\n  gpuAcceleration,\n}: {\n  offsets: Offsets,\n  strategy: PositioningStrategy,\n  gpuAcceleration: boolean,\n}) => {\n  // by default it is active, disable it only if explicitly set to false\n  if (gpuAcceleration === false) {\n    return {\n      top: `${offsets.y}px`,\n      left: `${offsets.x}px`,\n      position: mapStrategyToPosition(strategy),\n    };\n  } else {\n    return {\n      transform: `translate3d(${offsets.x}px, ${offsets.y}px, 0)`,\n      position: mapStrategyToPosition(strategy),\n    };\n  }\n};\n\nexport const computeArrowStyles = ({\n  offsets,\n  gpuAcceleration,\n}: {\n  offsets: Offsets,\n  gpuAcceleration: boolean,\n}) => {\n  if (gpuAcceleration) {\n    return {\n      top: `${offsets.y}px`,\n      left: `${offsets.x}px`,\n      position: 'absolute',\n    };\n  } else {\n    return {\n      transform: `translate3d(${offsets.x}px, ${offsets.y}px, 0)`,\n      position: 'absolute',\n    };\n  }\n};\n\nexport function computeStyles(state: State, options: ?Options) {\n  const gpuAcceleration =\n    options && options.gpuAcceleration != null ? options.gpuAcceleration : true;\n\n  state.styles = {};\n\n  // popper offsets are always available\n  state.styles.popper = computePopperStyles({\n    offsets: state.offsets.popper,\n    strategy: state.options.strategy,\n    gpuAcceleration,\n  });\n\n  // arrow offsets may not be available\n  if (state.offsets.arrow != null) {\n    state.styles.arrow = computeArrowStyles({\n      offsets: state.offsets.arrow,\n      gpuAcceleration,\n    });\n  }\n\n  return state;\n}\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'main',\n  fn: computeStyles,\n};\n","// @flow\nimport type { State, PositioningStrategy } from '../types';\n\n// This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nexport function applyStyles(state: State) {\n  Object.keys(state.elements).forEach(name => {\n    const style = state.styles.hasOwnProperty(name) ? state.styles[name] : null;\n\n    // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElemen\n    // $FlowIgnore\n    Object.assign(state.elements[name].style, style);\n  });\n\n  return state;\n}\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  requires: ['computeStyles'],\n};\n","export { default as computeStyles } from './computeStyles';\nexport { default as applyStyles } from './applyStyles';\n//export { default as preventOverflow } from './preventOverflow';\n","// @flow\nimport type {\n  JQueryWrapper,\n  State,\n  Options,\n  UpdateCallback,\n  EventListeners,\n  Rect,\n  Modifier,\n} from './types';\n\n// DOM Utils\nimport getElementClientRect from './dom-utils/getElementClientRect';\nimport listScrollParents from './dom-utils/listScrollParents';\nimport getWindow from './dom-utils/getWindow';\nimport getNodeScroll from './dom-utils/getNodeScroll';\nimport getOffsetParent from './dom-utils/getOffsetParent';\nimport getCommonTotalScroll from './dom-utils/getCommonTotalScroll';\n\n// Pure Utils\nimport unwrapJqueryElement from './utils/unwrapJqueryElement';\nimport orderModifiers from './utils/orderModifiers';\nimport expandEventListeners from './utils/expandEventListeners';\nimport computeOffsets from './utils/computeOffsets';\nimport format from './utils/format';\nimport debounce from './utils/debounce';\nimport validateModifiers from './utils/validateModifiers';\n\n// Default modifiers\nimport * as modifiers from './modifiers/index';\n\nconst defaultModifiers: Array<Modifier> = (Object.values(modifiers): any);\n\nconst INVALID_ELEMENT_ERROR =\n  'Invalid `%s` argument provided to Popper.js, it must be either a valid DOM element or a jQuery-wrapped DOM element, you provided `%s`';\n\nconst areValidElements = (a: mixed, b: mixed): boolean %checks =>\n  a instanceof Element && b instanceof Element;\n\nconst defaultOptions = {\n  placement: 'bottom',\n  eventListeners: { scroll: true, resize: true },\n  modifiers: [],\n  strategy: 'absolute',\n};\n\nexport default class Popper {\n  state: $Shape<State> = {\n    placement: 'bottom',\n    orderedModifiers: [],\n    options: defaultOptions,\n  };\n\n  constructor(\n    reference: Element | JQueryWrapper,\n    popper: Element | JQueryWrapper,\n    options: Options = defaultOptions\n  ) {\n    // make update() debounced, so that it only runs at most once-per-tick\n    (this: any).update = debounce(this.update.bind(this));\n\n    // Unwrap `reference` and `popper` elements in case they are\n    // wrapped by jQuery, otherwise consume them as is\n    this.state.elements = {\n      reference: unwrapJqueryElement(reference),\n      popper: unwrapJqueryElement(popper),\n    };\n    const {\n      reference: referenceElement,\n      popper: popperElement,\n    } = this.state.elements;\n\n    // Store options into state\n    this.state.options = { ...defaultOptions, ...options };\n\n    // Cache the placement in cache to make it available to the modifiers\n    // modifiers will modify this one (rather than the one in options)\n    this.state.placement = options.placement;\n\n    // Don't proceed if `reference` or `popper` are invalid elements\n    if (!areValidElements(referenceElement, popperElement)) {\n      return;\n    }\n\n    this.state.scrollParents = {\n      reference: listScrollParents(referenceElement),\n      popper: listScrollParents(popperElement),\n    };\n\n    // Order `options.modifiers` so that the dependencies are fulfilled\n    // once the modifiers are executed\n    this.state.orderedModifiers = orderModifiers([\n      ...defaultModifiers,\n      ...this.state.options.modifiers,\n    ]);\n\n    // Validate the provided modifiers so that the consumer will get warned\n    // of one of the custom modifiers is invalid for any reason\n    if (process.env.NODE_ENV !== 'production') {\n      validateModifiers(this.state.options.modifiers);\n    }\n\n    // Modifiers have the opportunity to execute some arbitrary code before\n    // the first update cycle is ran, the order of execution will be the same\n    // defined by the modifier dependencies directive.\n    // The `onLoad` function may add or alter the options of themselves\n    this.state.orderedModifiers.forEach(\n      ({ onLoad, enabled }) => enabled && onLoad && onLoad(this.state)\n    );\n\n    this.update().then(() => {\n      // After the first update completed, enable the event listeners\n      this.enableEventListeners(this.state.options.eventListeners);\n    });\n  }\n\n  // Async and optimistically optimized update\n  // it will not be executed if not necessary\n  // check Popper#constructor to see how it gets debounced\n  update() {\n    return new Promise<State>((success, reject) => {\n      this.forceUpdate();\n      success(this.state);\n    });\n  }\n\n  // Syncronous and forcefully executed update\n  // it will always be executed even if not necessary, usually NOT needed\n  // use Popper#update instead\n  forceUpdate() {\n    const {\n      reference: referenceElement,\n      popper: popperElement,\n    } = this.state.elements;\n    // Don't proceed if `reference` or `popper` are not valid elements anymore\n    if (!areValidElements(referenceElement, popperElement)) {\n      return;\n    }\n\n    // Get initial measurements\n    // these are going to be used to compute the initial popper offsets\n    // and as cache for any modifier that needs them later\n    this.state.measures = {\n      reference: getElementClientRect(referenceElement),\n      popper: getElementClientRect(popperElement),\n    };\n\n    // Get scrollTop and scrollLeft of the offsetParent\n    // this will be used in the `computeOffsets` function to properly\n    // position the popper taking in account the scroll position\n    // FIXME: right now we only look for a single offsetParent (the popper one)\n    //        but we really want to take in account the reference offsetParent as well\n    const offsetParentScroll = getNodeScroll(getOffsetParent(popperElement));\n\n    // Offsets are the actual position the popper needs to have to be\n    // properly positioned near its reference element\n    // This is the most basic placement, and will be adjusted by\n    // the modifiers in the next step\n    this.state.offsets = {\n      popper: computeOffsets({\n        reference: this.state.measures.reference,\n        popper: this.state.measures.popper,\n        strategy: 'absolute',\n        placement: this.state.options.placement,\n        scroll: getCommonTotalScroll(\n          referenceElement,\n          this.state.scrollParents.reference,\n          this.state.scrollParents.popper\n        ),\n      }),\n    };\n\n    // Modifiers have the ability to read the current Popper.js state, included\n    // the popper offsets, and modify it to address specifc cases\n    this.state = this.state.orderedModifiers.reduce(\n      (state, { fn, enabled, options }) => {\n        if (enabled && typeof fn === 'function') {\n          state = fn((this.state: State), options);\n        }\n        return state;\n      },\n      this.state\n    );\n  }\n\n  enableEventListeners(\n    eventListeners: boolean | { scroll?: boolean, resize?: boolean }\n  ) {\n    const {\n      reference: referenceElement,\n      popper: popperElement,\n    } = this.state.elements;\n    const { scroll, resize } = expandEventListeners(eventListeners);\n\n    if (scroll) {\n      const scrollParents = [\n        ...this.state.scrollParents.reference,\n        ...this.state.scrollParents.popper,\n      ];\n\n      scrollParents.forEach(scrollParent =>\n        scrollParent.addEventListener('scroll', this.update, {\n          passive: true,\n        })\n      );\n    }\n\n    if (resize) {\n      const win = getWindow(this.state.elements.popper);\n      win &&\n        win.addEventListener('resize', this.update, {\n          passive: true,\n        });\n    }\n  }\n}\n"],"names":["getWindow","node","ownerDocument","defaultView","window","getComputedStyle","element","width","offsetWidth","height","offsetHeight","top","offsetTop","left","offsetLeft","styles","marginTop","parseFloat","marginRight","marginBottom","marginLeft","y","x","nodeName","parentNode","host","document","documentElement","getScrollParent","body","HTMLElement","overflow","overflowX","overflowY","test","getParentNode","listScrollParents","list","scrollParent","isBody","target","updatedList","concat","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","getHTMLElementScroll","getElementScroll","getOffsetParent","offsetParent","toUpperCase","sumScroll","scrollParents","reduce","scroll","nodeScroll","getNodeScroll","getCommonTotalScroll","reference","referenceScrollParents","popperScrollParents","nonCommonReference","filter","includes","index","findIndex","slice","undefined","jquery","order","modifiers","mapped","mem","i","name","inherited","requires","ordered","sort","a","b","indexOf","phase","eventListeners","fallbackValue","resize","placement","split","bottom","right","basePlacements","start","end","placements","acc","read","main","write","popper","strategy","basePlacement","getBasePlacement","str","args","p","c","replace","microtaskDebounce","fn","called","Promise","resolve","then","ERROR_MESSAGE","VALID_PROPERTIES","forEach","modifier","Object","keys","key","console","error","format","String","enabled","onLoad","Array","isArray","map","s","join","mapStrategyToPosition","computePopperStyles","offsets","gpuAcceleration","position","transform","computeArrowStyles","computeStyles","state","options","arrow","applyStyles","elements","style","hasOwnProperty","assign","defaultModifiers","values","areValidElements","Element","defaultOptions","Popper","constructor","orderedModifiers","update","debounce","bind","unwrapJqueryElement","referenceElement","popperElement","orderModifiers","validateModifiers","enableEventListeners","success","reject","forceUpdate","measures","getElementClientRect","offsetParentScroll","computeOffsets","expandEventListeners","addEventListener","passive"],"mappings":"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"}