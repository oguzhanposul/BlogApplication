"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function getWindow(e){const t=e.ownerDocument;return t?t.defaultView:window}function getComputedStyle(e){return getWindow(e).getComputedStyle(e)}var getElementClientRect=e=>{const t=e.offsetWidth,r=e.offsetHeight,o=e.offsetTop,s=e.offsetLeft,n=getComputedStyle(e),a=parseFloat(n.marginTop)||0,i=parseFloat(n.marginRight)||0,l=parseFloat(n.marginBottom)||0,c=parseFloat(n.marginLeft)||0;return{width:t+c+i,height:r+a+l,y:o-a,x:s-c}},getParentNode=e=>"HTML"===e.nodeName?e:e.parentNode||e.host||document.ownerDocument||document.documentElement;function getScrollParent(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}if(e instanceof HTMLElement){const{overflow:t,overflowX:r,overflowY:o}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+o+r))return e}return getScrollParent(getParentNode(e))}function listScrollParents(e,t=[]){const r=getScrollParent(e),o="BODY"===r.nodeName,s=o?r.ownerDocument.defaultView:r,n=t.concat(s);return o?n:n.concat(listScrollParents(getParentNode(s)))}function getWindowScroll(e){const t=getWindow(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function getHTMLElementScroll(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function getElementScroll(e){return e!==getWindow(e)&&e instanceof HTMLElement?getHTMLElementScroll(e):getWindowScroll(e)}function getOffsetParent(e){const t=e instanceof HTMLElement?e.offsetParent:null,r=getWindow(e);return t&&t.nodeName&&"BODY"===t.nodeName.toUpperCase()?r:t||r}const sumScroll=e=>e.reduce((e,t)=>{const r=getElementScroll(t);return e.scrollTop+=r.scrollTop,e.scrollLeft+=r.scrollLeft,e},{scrollTop:0,scrollLeft:0});function getCommonTotalScroll(e,t,r){t.filter(e=>!r.includes(e));const o=getOffsetParent(e),s=t.findIndex(e=>e===o),n=t.slice(0,-1===s?void 0:s);return sumScroll(n)}var unwrapJqueryElement=e=>e&&e.jquery?e[0]:e;const order=e=>{const t=e.reduce((e,t)=>(e[t.name]=t,e),{}),r=e=>t[e].requires.reduce((e,t)=>[...e,t,...r(t)],[]);return e.sort((e,t)=>~r(t.name).indexOf(e.name)?-1:1)};var orderModifiers=e=>[...order(e.filter(({phase:e})=>"read"===e)),...order(e.filter(({phase:e})=>"main"===e)),...order(e.filter(({phase:e})=>"write"===e))],expandEventListeners=e=>{const t="boolean"==typeof e&&e;return{scroll:"boolean"==typeof e.scroll?e.scroll:t,resize:"boolean"==typeof e.resize?e.resize:t}},getBasePlacement=e=>e.split("-")[0];const top="top",bottom="bottom",right="right",left="left",basePlacements=[top,bottom,right,left],start="start",end="end",placements=basePlacements.reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),read="read",main="main",write="write";var computeOffsets=({reference:e,popper:t,strategy:r,placement:o,scroll:s})=>{const n=getBasePlacement(o),{scrollTop:a,scrollLeft:i}=s;switch(n){case top:return{x:e.x+e.width/2-t.width/2-i,y:e.y-t.height-a};case bottom:return{x:e.x+e.width/2-t.width/2-i,y:e.y+e.height-a};case right:return{x:e.x+e.width-i,y:e.y+e.height/2-t.height/2-a};case left:default:return{x:e.x-t.width-i,y:e.y+e.height/2-t.height/2-a}}},format=(e,...t)=>[...t].reduce((e,t)=>e.replace(/%s/,t),e);function microtaskDebounce(e){let t=!1;return()=>new Promise(r=>{if(t)return r();t=!0,Promise.resolve().then(()=>{t=!1,r(e())})})}const ERROR_MESSAGE='PopperJS: modifier "%s" provided an invalid %s property, expected %s but got %s',VALID_PROPERTIES=["name","enabled","phase","fn","onLoad","requires","options"];var validateModifiers=e=>{e.forEach(e=>{Object.keys(e).forEach(t=>{switch(t){case"name":"string"!=typeof e.name&&console.error(format(ERROR_MESSAGE,String(e.name),'"name"','"string"',`"${String(e.name)}"`));break;case"enabled":"boolean"!=typeof e.enabled&&console.error(format(ERROR_MESSAGE,e.name,'"enabled"','"boolean"',`"${String(e.enabled)}"`));case"phase":[read,main,write].includes(e.phase)||console.error(format(ERROR_MESSAGE,e.name,'"phase"','either "read", "main" or "write"',`"${String(e.phase)}"`));break;case"fn":"function"!=typeof e.fn&&console.error(format(ERROR_MESSAGE,e.name,'"fn"','"function"',`"${String(e.fn)}"`));break;case"onLoad":"function"!=typeof e.onLoad&&console.error(format(ERROR_MESSAGE,e.name,'"onLoad"','"function"',`"${String(e.fn)}"`));break;case"requires":Array.isArray(e.requires)||console.error(format(ERROR_MESSAGE,e.name,'"requires"','"array"',`"${String(e.requires)}"`));break;case"object":break;default:console.error(`PopperJS: an invalid property has been provided to the "${e.name}" modifier, valid properties are ${VALID_PROPERTIES.map(e=>`"${e}"`).join(", ")}; but "${t}" was provided.`)}})})};const mapStrategyToPosition=e=>{switch(e){case"fixed":return"fixed";case"absolute":default:return"absolute"}},computePopperStyles=({offsets:e,strategy:t,gpuAcceleration:r})=>!1===r?{top:`${e.y}px`,left:`${e.x}px`,position:mapStrategyToPosition(t)}:{transform:`translate3d(${e.x}px, ${e.y}px, 0)`,position:mapStrategyToPosition(t)},computeArrowStyles=({offsets:e,gpuAcceleration:t})=>t?{top:`${e.y}px`,left:`${e.x}px`,position:"absolute"}:{transform:`translate3d(${e.x}px, ${e.y}px, 0)`,position:"absolute"};function computeStyles(e,t){const r=!t||null==t.gpuAcceleration||t.gpuAcceleration;return e.styles={},e.styles.popper=computePopperStyles({offsets:e.offsets.popper,strategy:e.options.strategy,gpuAcceleration:r}),null!=e.offsets.arrow&&(e.styles.arrow=computeArrowStyles({offsets:e.offsets.arrow,gpuAcceleration:r})),e}var computeStyles$1={name:"computeStyles",enabled:!0,phase:"main",fn:computeStyles};function applyStyles(e){return Object.keys(e.elements).forEach(t=>{const r=e.styles.hasOwnProperty(t)?e.styles[t]:null;Object.assign(e.elements[t].style,r)}),e}var applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,requires:["computeStyles"]},modifiers=Object.freeze({computeStyles:computeStyles$1,applyStyles:applyStyles$1});const defaultModifiers=Object.values(modifiers),areValidElements=(e,t)=>e instanceof Element&&t instanceof Element,defaultOptions={placement:"bottom",eventListeners:{scroll:!0,resize:!0},modifiers:[],strategy:"absolute"};class Popper{constructor(e,t,r=defaultOptions){_defineProperty(this,"state",{placement:"bottom",orderedModifiers:[],options:defaultOptions}),this.update=microtaskDebounce(this.update.bind(this)),this.state.elements={reference:unwrapJqueryElement(e),popper:unwrapJqueryElement(t)};const{reference:o,popper:s}=this.state.elements;this.state.options=_objectSpread({},defaultOptions,r),this.state.placement=r.placement,areValidElements(o,s)&&(this.state.scrollParents={reference:listScrollParents(o),popper:listScrollParents(s)},this.state.orderedModifiers=orderModifiers([...defaultModifiers,...this.state.options.modifiers]),validateModifiers(this.state.options.modifiers),this.state.orderedModifiers.forEach(({onLoad:e,enabled:t})=>t&&e&&e(this.state)),this.update().then(()=>{this.enableEventListeners(this.state.options.eventListeners)}))}update(){return new Promise((e,t)=>{this.forceUpdate(),e(this.state)})}forceUpdate(){const{reference:e,popper:t}=this.state.elements;if(!areValidElements(e,t))return;this.state.measures={reference:getElementClientRect(e),popper:getElementClientRect(t)};getElementScroll(getOffsetParent(t));this.state.offsets={popper:computeOffsets({reference:this.state.measures.reference,popper:this.state.measures.popper,strategy:"absolute",placement:this.state.options.placement,scroll:getCommonTotalScroll(e,this.state.scrollParents.reference,this.state.scrollParents.popper)})},this.state=this.state.orderedModifiers.reduce((e,{fn:t,enabled:r,options:o})=>(r&&"function"==typeof t&&(e=t(this.state,o)),e),this.state)}enableEventListeners(e){const{reference:t,popper:r}=this.state.elements,{scroll:o,resize:s}=expandEventListeners(e);if(o){[...this.state.scrollParents.reference,...this.state.scrollParents.popper].forEach(e=>e.addEventListener("scroll",this.update,{passive:!0}))}if(s){const e=getWindow(this.state.elements.popper);e&&e.addEventListener("resize",this.update,{passive:!0})}}}module.exports=Popper;
//# sourceMappingURL=index.min.js.map
